{% extends "base.html" %}
{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-sm-8 mt-3">
                <div class="card">
                    <div class="card-header">
                        Заполненность {{ hotel.name }}
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" aria-label="Example with label"
                                 style="width: {{ full }}%;" aria-valuenow="{{ full }}"
                                 aria-valuemin="0" aria-valuemax="100">
                                {{ full }}%
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-6"><h5 class="card-title">{{ title_object_info.name }}</h5>
                                    <p class="card-text">Количество номеров: {{ title_object_info.rooms_in_hotel }}</p>
                                    <p class="card-text">Количество
                                        мест: {{ title_object_info.capacity_in_hotel }}({{ title_object_info.extra_places_in_hotel }})</p>
                                    <p class="card-text">Количество человек в
                                        отеле: {{ number_guest_in_hotel }}</p>
                                </div>
                                <div class="col-sm-6"><p class="card-text">Группы в отеле <br>
                                    {% if groups %}
                                        {% for group in groups %}
                                            <span><a
                                                    href="{% url "group" pk=group.pk %}">{{ group.name }}</a> {{ group.count_guests }} чел. в группе</span>
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        групп нет
                                    {% endif %}
                                </p>
                                    <p>{% for employee in employees %}{{ employee.position }}:
                                        {{ employee.first_name }} {{ employee.last_name }}
                                    {% endfor %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <form class="mt-3" method="get" action="{% url 'object' pk=title_object_info.id %}">
                <div class="row">
                    <div class="col-2">
                        <label for="start-date" class="form-label">Дата начала</label>
                        <input type="date" id="start-date" class="form-control" name="start_date">
                    </div>
                    <div class="col-2">
                        <label for="end-date" class="form-label">Дата окончания</label>
                        <input type="date" id="end-date" class="form-control" name="end_date" disabled>
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            <button type="submit" class="btn btn-primary disabled" id="submit-date">Проверить</button>
                        </div>
                    </div>
                </div>
            </form>


            <p>{{ object.1.number_guest_in_hotel }}</p>

            <div class="accordion" id="accordion{{ forloop.counter }}">
                {% for object in object_info_by_date %}
                    <div class="accordion-item ">
                        <h2 class="accordion-header primary" id="heading{{ forloop.counter }}">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="true"
                                    aria-controls="collapse{{ forloop.counter }}">
                                {{ object.0 | date }} - {{ object.2 |date }}
                            </button>
                        </h2>
                        <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse"
                             aria-labelledby="heading{{ forloop.counter }}"
                             data-bs-parent="#accordion{{ forloop.counter }}">
                            <div class="accordion-body">
                                <p>{{ object.1.number_guest_in_hotel }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}